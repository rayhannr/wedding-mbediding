---
import Layout from '@/layouts/Layout.astro'
import Main from '@/layouts/Main.astro'
import { Input } from '@/components/ui/input'
import { Button } from '@/components/ui/button'
import dayjs from 'dayjs'
import { WEDDING_DATE } from 'astro:env/client'
import { GROOM_NICKNAME } from 'astro:env/client'
import { BRIDE_NICKNAME } from 'astro:env/client'
import BackgroundV2 from '@/components/common/BackgroundV2.astro'
---

<Layout>
  <BackgroundV2 />
  <Main className="mx-auto flex flex-col justify-center h-screen">
    <div class="font-title pointer-events-none">
      <h2 class="relative inline-block text-lg md:text-xl">Walimatul 'Urs</h2>
      <br />
      <h1 class="relative inline-block text-balance text-4xl sm:text-5xl lg:text-6xl tracking-[-.045em]!">
        {GROOM_NICKNAME} & {BRIDE_NICKNAME}
      </h1>
      <br />
      <p class="relative inline-block text-lg md:text-xl">{dayjs(WEDDING_DATE).format('DD.MM.YY')}</p>
    </div>
    <p class="relative text-muted-foreground text-base lg:text-lg mb-8 pointer-events-none">
      Masukkan kode 6 digit huruf besar dan angka yang ada di link yang dikirim calon pengantin untuk membuka undangan Anda
    </p>
    <form class="relative flex gap-3">
      <Input name="code" placeholder="12AB3C" className="text-base lg:text-lg" />
      <Button type="submit">Cek</Button>
    </form>
  </Main>
</Layout>

<script>
  const input = document.querySelector('input')
  const form = document.querySelector('form')

  if (form) {
    form.addEventListener('submit', (event) => {
      event.preventDefault()
      if (input?.value) {
        window.location.href = `/${input.value}`
      }
    })
  }
</script>
